<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OSON MARKET</title>
<style>
  *{box-sizing:border-box;margin:0;padding:0;font-family:sans-serif;}
  body{background:#f9f9f9;padding:15px;color:#222;}
  header{text-align:center;margin-bottom:20px;}
  main{max-width:1200px;margin:0 auto;display:flex;flex-wrap:wrap;gap:20px;}
  section{background:#fff;padding:15px;border-radius:12px;box-shadow:0 3px 8px rgba(0,0,0,0.1);}
  #products{flex:3 1 600px;display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:15px;}
  .product-card{border-radius:12px;box-shadow:0 5px 15px rgba(0,0,0,0.1);padding:15px;display:flex;flex-direction:column;transition:box-shadow 0.3s;}
  .product-card:hover{box-shadow:0 10px 20px rgba(0,0,0,0.15);}
  .product-card img{width:100%;border-radius:10px;aspect-ratio:1/1;object-fit:cover;margin-bottom:12px;}
  .product-card h3{font-weight:600;margin-bottom:8px;font-size:1.1rem;flex-grow:1;}
  .product-card p{color:#0078d7;font-weight:700;margin-bottom:12px;}
  .product-card button{background:#0078d7;color:#fff;border:none;border-radius:10px;padding:10px;font-weight:700;cursor:pointer;transition:background 0.3s;}
  .product-card button:hover{background:#005fa3;}
  #cart{flex:1 1 280px;display:flex;flex-direction:column;max-height:600px;}
  #cart h2{margin-bottom:10px;font-weight:700;}
  #cart-list{flex-grow:1;overflow-y:auto;list-style:none;padding-right:5px;}
  .cart-item{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid #eee;}
  .cart-item span{flex-grow:1;overflow-wrap:anywhere;}
  .cart-item input{width:50px;margin:0 10px;padding:4px;border-radius:6px;border:1px solid #ccc;text-align:center;}
  .cart-item button{background:none;border:none;color:#cc0000;font-size:1.4rem;cursor:pointer;user-select:none;padding:0 5px;}
  #cart-total{font-weight:700;font-size:1.2rem;text-align:right;margin:10px 0;color:#0078d7;}
  #checkoutBtn{background:#28a745;color:#fff;border:none;border-radius:12px;padding:15px;font-weight:700;cursor:pointer;transition:background 0.3s;}
  #checkoutBtn:hover{background:#1e7e34;}
  #notification{
    position:fixed;top:20px;right:20px;background:#28a745;color:#fff;padding:12px 20px;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,0.2);
    display:none; z-index:1000; font-weight:700;
  }
  @media(max-width:768px){
    main{flex-direction:column;}
    #cart,#products{max-width:100%;}
  }
</style>
</head>
<body>
<header>
  <h1>OSON MARKET</h1>
</header>

<main>
  <section id="products"></section>

  <section id="cart">
    <h2>Корзина</h2>
    <ul id="cart-list"><li>Корзина пуста</li></ul>
    <div id="cart-total">Итого: 0 UZS</div>
    <button id="checkoutBtn" disabled>Оформить заказ</button>
  </section>
</main>

<div id="notification"></div>

<script>
// ...сюда будет JS код следующей частью...
</script>

</body>
</html>
const productsContainer = document.getElementById("products");
const cartList = document.getElementById("cart-list");
const cartTotal = document.getElementById("cart-total");
const checkoutBtn = document.getElementById("checkoutBtn");
const notification = document.getElementById("notification");

let cart = [];

function showNotification(msg) {
  notification.textContent = msg;
  notification.style.display = "block";
  setTimeout(() => (notification.style.display = "none"), 3000);
}

function addToCart(id) {
  const item = cart.find(p => p.id === id);
  if (item) {
    item.qty += 1;
  } else {
    cart.push({ id, qty: 1 });
  }
  renderCart();
  showNotification("Товар добавлен в корзину");
}

function removeFromCart(id) {
  cart = cart.filter(item => item.id !== id);
  renderCart();
}

function renderCart() {
  cartList.innerHTML = "";
  let total = 0;
  if (cart.length === 0) {
    cartList.innerHTML = "<li>Корзина пуста</li>";
    cartTotal.textContent = "Итого: 0 UZS";
    checkoutBtn.disabled = true;
    return;
  }

  cart.forEach(item => {
    const prod = productsData.find(p => p.id === item.id);
    const sum = prod.price * item.qty;
    total += sum;

    const li = document.createElement("li");
    li.className = "cart-item";
    li.innerHTML = `
      <span>${prod.name}</span>
      <input type="number" value="${item.qty}" min="1" />
      <span>${sum.toLocaleString()} UZS</span>
      <button>&times;</button>
    `;
    const [qtyInput, removeBtn] = li.querySelectorAll("input, button");

    qtyInput.onchange = () => {
      const val = parseInt(qtyInput.value);
      if (val > 0) {
        item.qty = val;
        renderCart();
      }
    };

    removeBtn.onclick = () => removeFromCart(item.id);

    cartList.appendChild(li);
  });

  cartTotal.textContent = `Итого: ${total.toLocaleString()} UZS`;
  checkoutBtn.disabled = false;
}

checkoutBtn.onclick = () => {
  showNotification("Заказ оформлен!");
  cart = [];
  renderCart();
};

function renderProducts() {
  productsContainer.innerHTML = "";
  productsData.forEach(prod => {
    const div = document.createElement("div");
    div.className = "product-card";
    div.innerHTML = `
      <img src="${prod.img}" alt="${prod.name}">
      <h3>${prod.name}</h3>
      <p>${prod.price.toLocaleString()} UZS</p>
      <button>Добавить в корзину</button>
    `;
    div.querySelector("button").onclick = () => addToCart(prod.id);
    productsContainer.appendChild(div);
  });
}

// === Пример 100 товаров ===
const productsData = [];
const categories = ["Одежда", "Обувь", "Электроника", "Аксессуары", "Бытовая техника"];
const baseImgs = [
  "https://via.placeholder.com/300x300.png?text=Товар+1",
  "https://via.placeholder.com/300x300.png?text=Товар+2",
  "https://via.placeholder.com/300x300.png?text=Товар+3",
  "https://via.placeholder.com/300x300.png?text=Товар+4"
];

for (let i = 1; i <= 100; i++) {
  productsData.push({
    id: i,
    name: `Товар №${i}`,
    price: 20000 + Math.floor(Math.random() * 200000),
    category: categories[i % categories.length],
    img: baseImgs[i % baseImgs.length]
  });
}

renderProducts();
renderCart();